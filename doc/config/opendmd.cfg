# opendmd.conf
#
# This config file was generated by opendmd 0.0.1

###########################################################
###########################################################
# Progress Basic Settings
###########################################################
###########################################################

# cluster node: a node works as slave node, master node or singleton node;
# cluster mode: slave, master, or singleton
# client: as a working node, responsible for capturing and sending;
# server: as a master node, responsible for receiving and saving;
# singleton: only one node in whole cluster , capturing and saving;
# default: set as singleton, changed at config_parse;
cluster_mode singleton

# progress's log level, equivalent to syslog log level;
# in debug mode, default log level is LOG_INFO,
# in release mode, default log level is LOG_ERR;
# define LOG_EMERG   0   /* system is unusable */
# define LOG_ALERT   1   /* action must be taken immediately */
# define LOG_CRIT    2   /* critical conditions */
# define LOG_ERR     3   /* error conditions */
# define LOG_WARNING 4   /* warning conditions */
# define LOG_NOTICE  5   /* normal but significant condition */
# define LOG_INFO    6   /* informational */
# define LOG_DEBUG   7   /* debug-level messages */
log_level LOG_DEBUG

# run in daemon mode (default: off)
daemon_mode off

# pid file, which is used to store main process ID.
# (default: $(HOME)/opendmd/opendmd.pid or /var/run/opendmd/opendmd.pid.)
# pid_file /var/run/opendmd/opendmd.pid
pid_file /home/wzw/opendmd/opendmd.pid

# config file
# config_file /home/wzw/opendmd/opendmd.cfg

# x264 fps; ATTENTION: this setting is very important!
x264_fps 25

# database file directory
database_repo /home/wzw/opendmd/database

# for webserver binding ip
webserver_ip 192.168.1.100

# for webserver binding port
webserver_port 8080

# webserver root to place static webserver file such as html, css, etc.
webserver_root /var/www/opendmd

# username and password to login webserver
webserver_userpass admin:admin

###########################################################
###########################################################
# Client Settings
###########################################################
###########################################################

# the opendmd working mode: capture picture, capture video or all;
# valid value: picture, video, webserver, all;
# webserver means only run webserver process, for debug purpose.
working_mode picture

###########################################################
# Video Device Settings
###########################################################

# Video device used for capturing, (default: /dev/video0)
video_device /dev/video0

# Image width in pixels. (default: 640)
image_width 640

# Image height in pixels. (default: 480)
image_height 480

# mmap req.count. (default: 5, range: 1~5)
req_count 5


###########################################################
# Motion Detection Threshold Settings
###########################################################

# the pixels threshold motion occured
diff_pixels 3000

# the deviation pixels allowed.
diff_deviation 20

# the time (in seonds) elapsed when last motion detected
# before video capturing stoped, (default: 5)
video_duration 10


###########################################################
# Captured picture/video Store Settings
###########################################################

# captured picture format, (default: jpeg);
# valid value: bmp, jpeg, png, at present support jpeg only.
picture_format jpeg

# captured video format, (default: h264);
# valid value: h264 and others, at present support h264 only.
video_format h264

# captured picture/video storage directory.
# (default: $(HOME)/opendmd)
#   picture: $(HOME)/opendmd/client_repo/picture)
#   video:   $(HOME)/opendmd/client_repo/video)
client_repo /home/wzw/opendmd/client_repo

###########################################################
# RTP SESSION Settings
###########################################################

# local ip, used in ortp send/recv.
local_ip 192.168.1.100

# local ip, used in ortp send/recv.
local_port 8000

#local sequence number, for server multiplex I/O
local_sequence_number 1

# server_ip and server_port_base are both used for client and server;
# server_ip and server_port_base are both used for client and server;

# server ip, used in ortp send/recv.
server_ip 192.168.1.101

#server port base
server_port_base 5000

# server port, used in ortp rtp send/recv, for client only.
server_rtp_port 5002

# server port, used in ortp rtcp send/recv, for client only.
server_rtcp_port 5003


###########################################################
###########################################################
# Server Settings
###########################################################
###########################################################
# received picture/video repository directory.
# (default: $(HOME)/opendmd)
#   picture: $(HOME)/opendmd/picture)
#   video:   $(HOME)/opendmd/video)
server_repo /home/wzw/opendmd/server_repo

# client_scale for counter total cluster client number;
client_scale 5

# time elapsed before this receiving ended;
last_duration 3

